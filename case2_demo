library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)

activity <- read_csv("dailyActivity_merged.csv")
heartrate <- read_csv("heartrate_seconds_merged.csv")
sleep <- read_csv("sleepDay_merged.csv")


str(activity)
glimpse(activity)
head(activity)
str(heartrate)
str(sleep)
drop_na(sleep)

activity$ActivityDate=as.POSIXct(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")

sleep$SleepDay=as.POSIXct(sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")

heartrate$Time = as.POSIXct(heartrate$Time, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
heartrate$date <- format(heartrate$Time, format = "%m/%d/%y")

heartrate %>%
  group_by(Id, date) %>%
  summarize(mean = mean(heartrate$Value))

merge_data <- merge(activity, sleep, by = c('Id', 'date'))
merge_data_2 <- merge(merge_data, heartrate, by = c('Id', 'date'))
